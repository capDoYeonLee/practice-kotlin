<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>글 보기</title>
    <script>
        async function loadPost() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");
            const response = await fetch(`/posts/${id}`);
            const post = await response.json();

            document.getElementById("title").innerText = post.title;
            document.getElementById("author").innerText = post.author;
            document.getElementById("content").innerText = post.content;
            document.getElementById("delete-btn").onclick = async () => {
                if(confirm("정말 삭제하시겠습니까?")) {
                    await fetch(`/posts/${id}`, { method: "DELETE" });
                    alert("삭제되었습니다.");
                    window.location.href = "index.html";
                }
            };
        }
        window.onload = loadPost;
    </script>
</head>
<body>
<h1 id="title"></h1>
<p><strong>작성자:</strong> <span id="author"></span></p>
<p id="content"></p>
<button id="delete-btn">삭제</button>
<a href="index.html">목록으로</a>
</body>
</html>
